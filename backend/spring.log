[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------< com.petconect:petconnect-backend >------------------
[INFO] Building PetConnect Backend 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.2.6:run (default-cli) > test-compile @ petconnect-backend >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ petconnect-backend ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 2 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ petconnect-backend ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ petconnect-backend ---
[INFO] skip non existing resourceDirectory /home/pedro/a3hoje/petconnect-backend-only/backend/src/test/resources
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ petconnect-backend ---
[INFO] No sources to compile
[INFO] 
[INFO] <<< spring-boot:3.2.6:run (default-cli) < test-compile @ petconnect-backend <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.2.6:run (default-cli) @ petconnect-backend ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.6)

2025-06-21T13:40:32.614-03:00  INFO 42767 --- [           main] c.petconect.backend.BackendApplication   : Starting BackendApplication using Java 21.0.7 with PID 42767 (/home/pedro/a3hoje/petconnect-backend-only/backend/target/classes started by pedro in /home/pedro/a3hoje/petconnect-backend-only/backend)
2025-06-21T13:40:32.615-03:00  INFO 42767 --- [           main] c.petconect.backend.BackendApplication   : No active profile set, falling back to 1 default profile: "default"
2025-06-21T13:40:32.984-03:00  INFO 42767 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-21T13:40:33.026-03:00  INFO 42767 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 37 ms. Found 10 JPA repository interfaces.
2025-06-21T13:40:33.340-03:00  INFO 42767 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-21T13:40:33.349-03:00  INFO 42767 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-21T13:40:33.350-03:00  INFO 42767 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.24]
2025-06-21T13:40:33.380-03:00  INFO 42767 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-21T13:40:33.381-03:00  INFO 42767 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 728 ms
2025-06-21T13:40:33.437-03:00  INFO 42767 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-21T13:40:33.663-03:00  INFO 42767 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6f347d7
2025-06-21T13:40:33.664-03:00  INFO 42767 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-21T13:40:33.726-03:00  INFO 42767 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-21T13:40:33.753-03:00  INFO 42767 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.8.Final
2025-06-21T13:40:33.771-03:00  INFO 42767 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-21T13:40:33.915-03:00  INFO 42767 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-21T13:40:33.951-03:00  WARN 42767 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-21T13:40:34.627-03:00  INFO 42767 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-21T13:40:34.637-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    alter table if exists pet 
       drop constraint if exists FKii721jo1jx2phj2jrfqbvfxnj
Hibernate: 
    alter table if exists pet 
       drop constraint if exists FKii721jo1jx2phj2jrfqbvfxnj
2025-06-21T13:40:34.643-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    drop table if exists food cascade
Hibernate: 
    drop table if exists food cascade
2025-06-21T13:40:34.646-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    drop table if exists pet cascade
Hibernate: 
    drop table if exists pet cascade
2025-06-21T13:40:34.649-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    drop table if exists product cascade
Hibernate: 
    drop table if exists product cascade
2025-06-21T13:40:34.651-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    drop table if exists security_question cascade
Hibernate: 
    drop table if exists security_question cascade
2025-06-21T13:40:34.653-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    drop table if exists store cascade
Hibernate: 
    drop table if exists store cascade
2025-06-21T13:40:34.655-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    drop table if exists users cascade
Hibernate: 
    drop table if exists users cascade
2025-06-21T13:40:34.657-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    drop table if exists vet_service cascade
Hibernate: 
    drop table if exists vet_service cascade
2025-06-21T13:40:34.664-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    create table food (
        recommended_daily_amount float(53) not null,
        created_at timestamp(6),
        id bigserial not null,
        owner_id bigint,
        updated_at timestamp(6),
        brand varchar(255),
        name varchar(255),
        notes varchar(255),
        type varchar(255),
        primary key (id)
    )
Hibernate: 
    create table food (
        recommended_daily_amount float(53) not null,
        created_at timestamp(6),
        id bigserial not null,
        owner_id bigint,
        updated_at timestamp(6),
        brand varchar(255),
        name varchar(255),
        notes varchar(255),
        type varchar(255),
        primary key (id)
    )
2025-06-21T13:40:34.669-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    create table pet (
        age integer not null,
        weight float(53) not null,
        id bigserial not null,
        tutor_id bigint not null,
        activity_level varchar(255),
        breed varchar(255),
        name varchar(255) not null,
        notes varchar(255),
        photo_url varchar(255),
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table pet (
        age integer not null,
        weight float(53) not null,
        id bigserial not null,
        tutor_id bigint not null,
        activity_level varchar(255),
        breed varchar(255),
        name varchar(255) not null,
        notes varchar(255),
        photo_url varchar(255),
        type varchar(255) not null,
        primary key (id)
    )
2025-06-21T13:40:34.673-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    create table product (
        price float(53) not null,
        created_at timestamp(6),
        id bigserial not null,
        owner_id bigint,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        measurement_unit varchar(255),
        name varchar(255),
        owner_location varchar(255),
        owner_name varchar(255),
        owner_phone varchar(255),
        primary key (id)
    )
Hibernate: 
    create table product (
        price float(53) not null,
        created_at timestamp(6),
        id bigserial not null,
        owner_id bigint,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        measurement_unit varchar(255),
        name varchar(255),
        owner_location varchar(255),
        owner_name varchar(255),
        owner_phone varchar(255),
        primary key (id)
    )
2025-06-21T13:40:34.676-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    create table security_question (
        id bigserial not null,
        answer varchar(255),
        question varchar(255),
        primary key (id)
    )
Hibernate: 
    create table security_question (
        id bigserial not null,
        answer varchar(255),
        question varchar(255),
        primary key (id)
    )
2025-06-21T13:40:34.680-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    create table store (
        created_at timestamp(6),
        id bigserial not null,
        owner_id bigint,
        updated_at timestamp(6),
        cnpj varchar(255),
        email varchar(255),
        location varchar(255),
        name varchar(255),
        phone varchar(255),
        store_type varchar(255),
        primary key (id)
    )
Hibernate: 
    create table store (
        created_at timestamp(6),
        id bigserial not null,
        owner_id bigint,
        updated_at timestamp(6),
        cnpj varchar(255),
        email varchar(255),
        location varchar(255),
        name varchar(255),
        phone varchar(255),
        store_type varchar(255),
        primary key (id)
    )
2025-06-21T13:40:34.685-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    create table users (
        created_at timestamp(6) not null,
        id bigserial not null,
        updated_at timestamp(6) not null,
        dtype varchar(31) not null,
        cnpj varchar(255),
        crmv varchar(255),
        email varchar(255),
        location varchar(255),
        name varchar(255),
        operating_hours varchar(255),
        password varchar(255),
        phone varchar(255),
        responsible_name varchar(255),
        store_type varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users (
        created_at timestamp(6) not null,
        id bigserial not null,
        updated_at timestamp(6) not null,
        dtype varchar(31) not null,
        cnpj varchar(255),
        crmv varchar(255),
        email varchar(255),
        location varchar(255),
        name varchar(255),
        operating_hours varchar(255),
        password varchar(255),
        phone varchar(255),
        responsible_name varchar(255),
        store_type varchar(255),
        primary key (id)
    )
2025-06-21T13:40:34.690-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    create table vet_service (
        price float(53) not null,
        created_at timestamp(6),
        id bigserial not null,
        owner_id bigint,
        updated_at timestamp(6),
        description varchar(255),
        name varchar(255),
        operating_hours varchar(255),
        owner_crmv varchar(255),
        owner_location varchar(255),
        owner_name varchar(255),
        owner_phone varchar(255),
        primary key (id)
    )
Hibernate: 
    create table vet_service (
        price float(53) not null,
        created_at timestamp(6),
        id bigserial not null,
        owner_id bigint,
        updated_at timestamp(6),
        description varchar(255),
        name varchar(255),
        operating_hours varchar(255),
        owner_crmv varchar(255),
        owner_location varchar(255),
        owner_name varchar(255),
        owner_phone varchar(255),
        primary key (id)
    )
2025-06-21T13:40:34.693-03:00 DEBUG 42767 --- [           main] org.hibernate.SQL                        : 
    alter table if exists pet 
       add constraint FKii721jo1jx2phj2jrfqbvfxnj 
       foreign key (tutor_id) 
       references users
Hibernate: 
    alter table if exists pet 
       add constraint FKii721jo1jx2phj2jrfqbvfxnj 
       foreign key (tutor_id) 
       references users
2025-06-21T13:40:34.698-03:00  INFO 42767 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-21T13:40:35.018-03:00  WARN 42767 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-21T13:40:35.088-03:00 DEBUG 42767 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 53 mappings in 'requestMappingHandlerMapping'
2025-06-21T13:40:35.139-03:00 DEBUG 42767 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-06-21T13:40:35.161-03:00 DEBUG 42767 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-21T13:40:35.183-03:00 DEBUG 42767 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-21T13:40:35.257-03:00  WARN 42767 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-06-21T13:40:35.258-03:00  INFO 42767 --- [        2025-06-21T13:41:05.532-03:00  INFO 42363 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-21T13:41:05.532-03:00  INFO 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-21T13:41:05.532-03:00 DEBUG 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-06-21T13:41:05.532-03:00 DEBUG 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-06-21T13:41:05.532-03:00 DEBUG 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-06-21T13:41:05.534-03:00 DEBUG 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5bfeb9ba
2025-06-21T13:41:05.534-03:00 DEBUG 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6413eeb7
2025-06-21T13:41:05.535-03:00 DEBUG 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-21T13:41:05.535-03:00  INFO 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-06-21T13:41:05.541-03:00 DEBUG 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/pets", parameters={}
2025-06-21T13:41:05.549-03:00 DEBUG 42363 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petconect.backend.controller.PetController#getByTutor(Long)
2025-06-21T13:41:05.647-03:00 DEBUG 42363 --- [nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.activity_level,
        p1_0.age,
        p1_0.breed,
        p1_0.name,
        p1_0.notes,
        p1_0.photo_url,
        p1_0.tutor_id,
        p1_0.type,
        p1_0.weight 
    from
        pet p1_0
Hibernate: 
    select
        p1_0.id,
        p1_0.activity_level,
        p1_0.age,
        p1_0.breed,
        p1_0.name,
        p1_0.notes,
        p1_0.photo_url,
        p1_0.tutor_id,
        p1_0.type,
        p1_0.weight 
    from
        pet p1_0
2025-06-21T13:41:05.664-03:00 DEBUG 42363 --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-06-21T13:41:05.665-03:00 DEBUG 42363 --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [[]]
2025-06-21T13:41:05.675-03:00 DEBUG 42363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:27 min
[INFO] Finished at: 2025-06-21T13:41:21-03:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.2.6:run (default-cli) on project petconnect-backend: Process terminated with exit code: 137 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
ion: Protocol handler start failed
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1047) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:219) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	... 17 common frames omitted
Caused by: java.net.BindException: Endereço já em uso
	at java.base/sun.nio.ch.Net.bind0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.bind(Net.java:565) ~[na:na]
	at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:344) ~[na:na]
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:301) ~[na:na]
	at org.apache.tomcat.util.net.NioEndpoint.initServerSocket(NioEndpoint.java:239) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:194) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1286) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1372) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:635) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1044) ~[tomcat-embed-core-10.1.24.jar:10.1.24]
	... 19 common frames omitted

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  4.211 s
[INFO] Finished at: 2025-06-21T13:40:35-03:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.2.6:run (default-cli) on project petconnect-backend: Process terminated with exit code: 1 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
